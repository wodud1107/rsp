# RSP(Rock-Scissors-Paper) 2비트 GPIO 통신 프로젝트

## 1. 프로젝트 개요

본 프로젝트는 라즈베리파이 간 GPIO 2비트 시퀀스 통신을 이용해 가위바위보 게임을 구현하는 시스템 프로그래밍 과제입니다.  
커널 모듈 드라이버, 사용자 API, 응용프로그램, Makefile 등으로 전체 구조를 분리하고,  
직관적이고 안전한 핀 제어와 간단한 응용서비스를 목표로 했습니다.

---

## 2. 주요 구성 및 동작 방식

### 2.1. 시스템 구조

- **커널 드라이버**: `rsp_driver.c`
  - 각 BCM GPIO를 /sys/class/rsp/rspgpioXX로 노출
  - 파일 입출력 및 방향 제어, IRQ 등 제공

- **API**: `rsp_api.c` / `rsp_api.h`
  - GPIO export/unexport, 입력/출력 모드 설정, 2비트 송수신 함수
  - 사용자 앱이 직접 GPIO 접근 코드를 작성하지 않도록 추상화

- **앱**: `rsp_game_app.c`
  - 사용자가 패를 입력(`send`), 수신자는 패를 수신(`recv`)
  - 2비트 시퀀스 통신을 이용해 게임 진행

- **Makefile**
  - 드라이버/앱 빌드, 청소 등 자동화

---

### 2.2. 통신 및 배선 설계

#### ▸ 사용 핀 (BCM 번호 예시)
- **DATA1**: 2비트 상위비트 (예: BCM 17)
- **DATA2**: 2비트 하위비트 (예: BCM 27)
- **CLK**  : 데이터 유효 신호 (예: BCM 22)
- **GND**  : 공통 그라운드

#### ▸ 배선 방법
| 송신 Pi (Output) | 수신 Pi (Input) |
|:---------------:|:--------------:|
| DATA1           | DATA1          |
| DATA2           | DATA2          |
| CLK             | CLK            |
| GND             | GND            |

- 반드시 **Output ↔ Input**으로만 연결 (Output ↔ Output 연결 금지: 합선 위험) 

---

### 2.3. 데이터 표현
| 2비트 값 | 의미        |
|:--------:|:----------:|
| 00       | 가위       |
| 01       | 바위       |
| 10       | 보         |
| 11       | 에러/예약  |

---

### 2.4. 동작 절차

1. 드라이버 모듈 적재  
    `sudo insmod rsp_driver.ko`
2. 앱 실행  
    - 송신자: `sudo ./rsp_game_app send` → 패 입력 및 전송
    - 수신자: `sudo ./rsp_game_app recv` → 상대 패 수신 및 출력
3. 게임 결과 판정(앱 내부)
4. 드라이버 제거  
    `sudo rmmod rsp_driver`
5. 빌드 파일 정리  
    `make clean`

---

## 3. 추후 확장 방향

### 3.1. **한계 및 의도적 제약**

- **동시 제출 불가**
  - 양쪽 Pi가 "동시에 패를 제출"하는 구조는 회로상 쇼트(합선) 위험이 있어 이번 과제에서는 **단방향 통신(순차 제출)** 방식만 사용
  - 실제 가위바위보와 같이 "상대가 뭘 냈는지 모른 채" 제출하는 구조는,  
    안전을 위해 구현하지 않음

- **보안 및 공정성 한계**
  - 수신자는 송신자의 패를 보고 전략적으로 패를 선택 가능  
  - 완전히 공정한 게임이 아님

### 3.2. **확장 방향 및 발전 아이디어**

- **하드웨어 인터럽트 활용**
  - 버튼 클릭 IRQ 핸들링을 통해 polling이 아닌 이벤트 기반 동작 확장

- **동시성 통신 프로토콜 구현**
  - 전기적 쇼트 위험 없이 양방향 동시 제출을 보장할 수 있는 커스텀 통신 프로토콜 설계(예: 비트 교차 전송, buffer, 시간 슬롯 분할 등)
  - 혹은 별도의 "동기 신호(READY, SYNC 핀)" 추가

- **멀티비트 통신 및 메시지 확장**
  - 2비트 대신 4비트 이상으로 확장하여 다양한 메시지나 게임 프로토콜 구현

- **오류 검출 및 복구**
  - 신호 노이즈나 잘못된 입력(11 등)에 대한 CRC, 패리티 등 에러 검출 기능 추가
